---
phase: 02-performance-optimization
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - package-lock.json
  - app/components/particles.tsx
  - util/mouse.ts
  - public/fonts/
  - tailwind.config.ts
  - .planning/lighthouse/
  - .planning/lighthouse/BUNDLE-ANALYSIS.md
autonomous: true
requirements:
  - OPT-01
  - OPT-05
  - OPT-06
  - OPT-07

must_haves:
  truths:
    - "Lighthouse baseline scores are captured and stored in .planning/lighthouse/ for all pages (home, projects, blog, about-me, contact) on both mobile and desktop"
    - "framer-motion is no longer in package.json dependencies"
    - "particles.tsx and util/mouse.ts no longer exist in the codebase"
    - "public/fonts/ directory (Montserrat files) no longer exists"
    - "tailwind.config.ts no longer references --font-calsans"
    - "@next/swc-linux-x64-gnu workaround removed from optionalDependencies"
    - "npm run build completes without errors after all removals"
    - "Bundle analyzer has been run and results documented in .planning/lighthouse/BUNDLE-ANALYSIS.md"
    - "Hero/landing section animations still render correctly after framer-motion and particles removal (visual confirmation)"
  artifacts:
    - path: ".planning/lighthouse/"
      provides: "Baseline Lighthouse reports (JSON + HTML) for all pages"
    - path: ".planning/lighthouse/BUNDLE-ANALYSIS.md"
      provides: "Bundle analyzer results with chunk sizes and quick-win assessment"
    - path: "package.json"
      provides: "Clean dependency list without framer-motion or @next/swc workaround"
    - path: "tailwind.config.ts"
      provides: "Clean font config without dead --font-calsans reference"
  key_links:
    - from: "package.json"
      to: "node_modules"
      via: "npm install after dependency removal"
      pattern: "npm install"
---

<objective>
Capture Lighthouse performance baselines for all pages, then remove dead dependencies, unused assets, and stale configuration that inflate the bundle or clutter the build.

Purpose: Establish a documented performance starting point (before any optimizations) and eliminate known dead weight — framer-motion (never imported, 0KB in bundle but pollutes deps), Montserrat fonts (4.3MB, never loaded), particles component (never imported), and stale config references.

Output: Baseline Lighthouse scores in `.planning/lighthouse/`, clean `package.json`, clean `tailwind.config.ts`, dead files deleted.
</objective>

<execution_context>
@C:/Users/xndr/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/xndr/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-performance-optimization/02-CONTEXT.md
@.planning/phases/02-performance-optimization/02-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Capture Lighthouse performance baselines for all pages</name>
  <files>.planning/lighthouse/</files>
  <action>
Run Lighthouse CLI against the local dev server to capture baseline scores BEFORE any optimizations.

1. Start the production build and server:
   ```bash
   npm run build && npm run start
   ```
   (Run in background or a separate terminal — Lighthouse needs the production server, not dev)

2. Create the output directory:
   ```bash
   mkdir -p .planning/lighthouse
   ```

3. Run Lighthouse for each page on both mobile (default) and desktop:
   Pages to measure: `/` (home), `/projects`, `/blog`, `/about-me`, `/contact`

   For each page, run:
   ```bash
   npx lighthouse "http://localhost:3000{path}" --output=json --output=html \
     --output-path=".planning/lighthouse/baseline-{name}-mobile" \
     --chrome-flags="--headless=new"

   npx lighthouse "http://localhost:3000{path}" --preset=desktop --output=json --output=html \
     --output-path=".planning/lighthouse/baseline-{name}-desktop" \
     --chrome-flags="--headless=new"
   ```

   Where `{path}` and `{name}` are:
   - `/` → `home`
   - `/projects` → `projects`
   - `/blog` → `blog`
   - `/about-me` → `about-me`
   - `/contact` → `contact`

4. After all runs, create a summary markdown file `.planning/lighthouse/BASELINE.md` with a table:

   ```markdown
   # Lighthouse Baseline — Pre-Phase 2

   **Measured:** {date}
   **Server:** localhost:3000 (production build)

   | Page | Mobile Perf | Desktop Perf | Mobile LCP | Mobile CLS | Mobile INP |
   |------|-------------|--------------|------------|------------|------------|
   | Home | XX | XX | X.Xs | X.XX | XXms |
   | Projects | XX | XX | X.Xs | X.XX | XXms |
   | Blog | XX | XX | X.Xs | X.XX | XXms |
   | About Me | XX | XX | X.Xs | X.XX | XXms |
   | Contact | XX | XX | X.Xs | X.XX | XXms |
   ```

   Extract values from the JSON reports: `categories.performance.score * 100` for Performance, `audits['largest-contentful-paint'].numericValue` for LCP, `audits['cumulative-layout-shift'].numericValue` for CLS, `audits['interaction-to-next-paint'].numericValue` for INP.

5. Stop the background server after measurement.

NOTE: If Lighthouse is not installed globally, use `npx lighthouse@latest`. If headless Chrome is unavailable, fall back to `--chrome-flags="--headless"` (old mode). Store the raw JSON files for later comparison — the HTML reports are for human review.
  </action>
  <verify>
- `.planning/lighthouse/BASELINE.md` exists with scores for all 5 pages
- At least 10 JSON report files exist in `.planning/lighthouse/` (5 pages x 2 presets)
- All Performance scores are numeric values between 0 and 100
  </verify>
  <done>Lighthouse baseline captured for all 5 pages on both mobile and desktop, stored in .planning/lighthouse/ with a BASELINE.md summary table</done>
</task>

<task type="auto">
  <name>Task 2: Remove dead dependencies, unused assets, and stale config</name>
  <files>
    package.json
    package-lock.json
    app/components/particles.tsx
    util/mouse.ts
    public/fonts/
    tailwind.config.ts
  </files>
  <action>
Remove all dead weight identified in the research phase. Each removal is independent.

**1. Remove framer-motion from dependencies (OPT-06):**
```bash
npm uninstall framer-motion
```
Framer-motion is listed in `package.json` dependencies but is never imported by any file in the codebase. The build output confirms 0 bytes of framer-motion in any chunk. All current animations use Tailwind CSS keyframes (`animate-fade-in`, etc.). Removing it keeps deps honest.

**2. Delete the unused Particles component (OPT-07):**
```bash
rm app/components/particles.tsx
rm -rf util/
```
`particles.tsx` is a canvas particle animation component that is never imported by any page. `util/mouse.ts` is only imported by `particles.tsx`. Research confirmed both are dead code. The hero/landing section animations use only Tailwind CSS keyframes — particles are not part of the hero. If needed in the future, they're in git history.

**3. Delete unused Montserrat font files:**
```bash
rm -rf public/fonts/
```
The `public/fonts/` directory contains Montserrat variable font files and 18+ static weight cuts (~4.3MB total). The root layout uses `next/font/google` for Inter — Montserrat is never referenced in any CSS, layout, or component file. These files are served as static assets and waste CDN cache space.

**4. Clean up stale tailwind.config.ts reference:**
In `tailwind.config.ts`, the `fontFamily` section references `'var(--font-calsans)'` on line 48. The `--font-calsans` CSS variable is never defined anywhere in the codebase (no @font-face, no next/font declaration). Remove the `display` font family entry entirely:

Change:
```typescript
fontFamily: {
  sans: ['var(--font-inter)', ...defaultTheme.fontFamily.sans],
  display: ['var(--font-calsans)'],
},
```
To:
```typescript
fontFamily: {
  sans: ['var(--font-inter)', ...defaultTheme.fontFamily.sans],
},
```

**5. Remove @next/swc workaround from optionalDependencies:**
In `package.json`, remove the entire `optionalDependencies` block:
```json
"optionalDependencies": {
  "@next/swc-linux-x64-gnu": "npm:null@^2.0.0"
}
```
This produces a build warning (`Mismatching @next/swc version, detected: 15.5.7 while Next.js is on 15.5.11`). It was a platform workaround that's no longer needed. Removing it eliminates the warning.

**6. Run bundle analyzer to capture current bundle state (OPT-05):**
```bash
ANALYZE=true npm run build
```
The project already has `webpack-bundle-analyzer` configured (in `next.config.js`, gated behind `ANALYZE=true`). This will open/generate a bundle visualization. Capture the output:
- Save or screenshot the bundle treemap showing chunk composition
- Document the total JS bundle sizes (shared chunk, per-page chunks) in a brief note in `.planning/lighthouse/BUNDLE-ANALYSIS.md`
- Identify any remaining quick-win reductions (unexpectedly large dependencies, duplicate modules). If none found beyond what was already removed, note that
- Close the analyzer when done

This satisfies OPT-05: "Bundle analyzer run and all identified quick-win bundle reductions implemented."

**7. Verify the build still works and hero animations render:**
```bash
npm run build && npm run start
```
Confirm: no build errors, no missing imports, no broken references. The build should be cleaner (no @next/swc warning).

**8. Visual regression check — hero animations:**
After `npm run start`, browse to `http://localhost:3000` and confirm:
- The hero/landing section renders correctly (heading, fade-in animations, tech stack)
- Tailwind CSS keyframe animations (`animate-fade-in`, etc.) still play on the home page
- No blank hero section or missing animation content

This confirms that removing framer-motion and particles.tsx did NOT break the hero section. The hero animations use Tailwind CSS keyframes (not framer-motion), so this should be a no-op — but we verify explicitly.

Stop the server after verification.

**Note on OPT-06:** framer-motion was never imported by any file in the codebase (verified by grep and build output). All current animations use Tailwind CSS keyframes. OPT-06 ("Framer Motion tree-shaken via LazyMotion + domAnimation") is satisfied as a no-op: the dependency contributed 0KB to the bundle and has been removed entirely. No LazyMotion migration needed since framer-motion was never used.
  </action>
  <verify>
- `npm run build` succeeds without errors
- `grep -r "framer-motion" package.json` returns nothing
- `ls app/components/particles.tsx` fails (file deleted)
- `ls util/mouse.ts` fails (file deleted)
- `ls public/fonts/` fails (directory deleted)
- `grep "font-calsans" tailwind.config.ts` returns nothing
- `grep "swc-linux" package.json` returns nothing
- No build warning about @next/swc version mismatch
- `.planning/lighthouse/BUNDLE-ANALYSIS.md` exists with bundle size breakdown
- After `npm run start`, browsing `http://localhost:3000` shows the hero section with working fade-in animations (visual confirmation that framer-motion/particle removal caused no regression)
  </verify>
  <done>framer-motion removed from dependencies, particles.tsx and util/mouse.ts deleted, public/fonts/ deleted, --font-calsans reference removed from tailwind.config.ts, @next/swc workaround removed, bundle analyzer run and documented, build passes clean, hero animations visually confirmed working</done>
</task>

</tasks>

<verification>
- Lighthouse baseline reports exist in `.planning/lighthouse/` with JSON + HTML files for all 5 pages x 2 presets
- BASELINE.md summary table has numeric scores for all pages
- BUNDLE-ANALYSIS.md exists with bundle size breakdown from `ANALYZE=true npm run build`
- `npm run build` succeeds with zero errors and no @next/swc warning
- No trace of framer-motion in package.json
- No trace of particles.tsx, mouse.ts, public/fonts/, or --font-calsans in the codebase
- The site renders correctly with no broken pages (all pages still load)
- Hero/landing section at `http://localhost:3000` renders with working fade-in animations (visual confirmation)
</verification>

<success_criteria>
1. Baseline Lighthouse Performance scores documented for home, projects, blog, about-me, and contact on both mobile and desktop
2. framer-motion fully removed from dependencies (OPT-06 satisfied — no-op: dependency was already unused, 0KB in bundle, all animations use Tailwind CSS keyframes; no LazyMotion migration needed)
3. Dead code eliminated: particles.tsx + mouse.ts deleted (OPT-07 satisfied)
4. Bundle analyzer run via `ANALYZE=true npm run build`, results documented in BUNDLE-ANALYSIS.md, and all identified quick-win reductions implemented: dead fonts deleted, stale config cleaned, @next/swc workaround removed (OPT-05 satisfied)
5. Build passes clean with no errors or warnings
6. Hero/landing section animations visually confirmed working after all removals (no regression from framer-motion or particles deletion)
</success_criteria>

<output>
After completion, create `.planning/phases/02-performance-optimization/02-01-SUMMARY.md`
</output>
